(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[113],{3999:(e,a,t)=>{"use strict";t.d(a,{cn:()=>n});var r=t(2596),s=t(9688);function n(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return(0,s.QP)((0,r.$)(a))}},5695:(e,a,t)=>{"use strict";var r=t(8999);t.o(r,"useParams")&&t.d(a,{useParams:function(){return r.useParams}}),t.o(r,"usePathname")&&t.d(a,{usePathname:function(){return r.usePathname}}),t.o(r,"useRouter")&&t.d(a,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(a,{useSearchParams:function(){return r.useSearchParams}})},8482:(e,a,t)=>{"use strict";t.d(a,{BT:()=>l,Wu:()=>d,ZB:()=>i,Zp:()=>n,aR:()=>o});var r=t(5155);t(2115);var s=t(3999);function n(e){let{className:a,...t}=e;return(0,r.jsx)("div",{"data-slot":"card",className:(0,s.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...t})}function o(e){let{className:a,...t}=e;return(0,r.jsx)("div",{"data-slot":"card-header",className:(0,s.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...t})}function i(e){let{className:a,...t}=e;return(0,r.jsx)("div",{"data-slot":"card-title",className:(0,s.cn)("leading-none font-semibold",a),...t})}function l(e){let{className:a,...t}=e;return(0,r.jsx)("div",{"data-slot":"card-description",className:(0,s.cn)("text-muted-foreground text-sm",a),...t})}function d(e){let{className:a,...t}=e;return(0,r.jsx)("div",{"data-slot":"card-content",className:(0,s.cn)("px-6",a),...t})}},8690:(e,a,t)=>{Promise.resolve().then(t.bind(t,9481))},9481:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>d});var r=t(5155),s=t(2115),n=t(8482),o=t(6671),i=t(5695),l=t(9509);let d=()=>{let[e,a]=(0,s.useState)(null),[t,d]=(0,s.useState)(null),[c,u]=(0,s.useState)({negotiationType:"Percentage",negotiationValue:"",yourQty:"",deliveryInfo:"",additionalNotes:""}),[m,x]=(0,s.useState)(!0),[g,h]=(0,s.useState)(!1),f=(0,i.useSearchParams)().get("id"),p=(0,i.useRouter)(),y=l.env.API_URL||"http://localhost:3033";(0,s.useEffect)(()=>{b(),v()},[f]);let j=(0,s.useCallback)(e=>{var a;let t="; ".concat(document.cookie).split("; ".concat(e,"="));return 2===t.length&&(null==(a=t.pop())?void 0:a.split(";").shift())||null},[]),b=async()=>{try{let e=await fetch("".concat(y,"/api/v1/quotaRequirement/").concat(f));if(!e.ok)throw Error("Failed to fetch order data");let a=await e.json();d(a)}catch(e){console.error("Error fetching order data:",e),o.oR.error("Failed to fetch order data. Please try again.")}},v=async()=>{try{let e=await fetch("".concat(y,"/api/v1/requirements/reqId/").concat(f));if(!e.ok)throw Error("Failed to fetch product data");let t=await e.json();a(t)}catch(e){console.error("Error fetching product data:",e),o.oR.error("Failed to fetch product data. Please try again.")}finally{x(!1)}},N=e=>{let{name:a,value:t}=e.target;u(e=>({...e,[a]:t}))},w=async()=>{if(!c.negotiationValue||!c.yourQty||!c.deliveryInfo)return void o.oR.error("Please fill in all required fields.");if(!t||!e)return void o.oR.error("Product or order data is not available. Please refresh and try again.");h(!0);let a={data:{negotiationValue:c.negotiationValue,yourQty:c.yourQty,deliveryRelatedInfo:c.deliveryInfo,messages:c.additionalNotes,previewAmount:t.amount,previewQty:t.minQty,measurement:e.measurement,SellerEmail:t.seller_email},productData:e,orderData:t},r=j("token");try{let e=await fetch("".concat(y,"/api/v1/negotiation"),{method:"POST",headers:{Authorization:"Bearer ".concat(r),"Content-Type":"application/json"},body:JSON.stringify(a)});if(!e.ok)throw Error("Failed to submit negotiation");let t=await e.json();console.log("Success:",t),p.push("/dashboard/tracking"),o.oR.success("Negotiation submitted successfully!"),u({negotiationType:"Percentage",negotiationValue:"",yourQty:"",deliveryInfo:"",additionalNotes:""})}catch(e){console.error("Error:",e),o.oR.error("Failed to submit negotiation. Please try again.")}finally{h(!1)}};return m?(0,r.jsx)("div",{className:"max-w-4xl mx-auto p-6",children:(0,r.jsxs)("div",{className:"animate-pulse",children:[(0,r.jsx)("div",{className:"h-8 bg-gray-200 rounded mb-6"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("div",{className:"h-32 bg-gray-200 rounded"}),(0,r.jsx)("div",{className:"h-32 bg-gray-200 rounded"}),(0,r.jsx)("div",{className:"h-48 bg-gray-200 rounded"})]})]})}):(0,r.jsxs)("div",{className:"max-w-4xl mx-auto p-6 space-y-6",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Negotiation Form"}),(0,r.jsxs)(n.Zp,{children:[(0,r.jsx)(n.aR,{children:(0,r.jsx)(n.ZB,{className:"text-xl font-semibold",children:"Product Details"})}),(0,r.jsx)(n.Wu,{children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium text-gray-700",children:"Name:"}),(0,r.jsx)("p",{className:"text-gray-900 mt-1",children:(null==e?void 0:e.name)||"Loading..."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium text-gray-700",children:"Min Qty:"}),(0,r.jsx)("p",{className:"text-gray-900 mt-1",children:(null==e?void 0:e.minQty)||"Loading..."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium text-gray-700",children:"Specification:"}),(0,r.jsx)("p",{className:"text-gray-900 mt-1",children:(null==e?void 0:e.specification)||"Loading..."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium text-gray-700",children:"Measurement:"}),(0,r.jsx)("p",{className:"text-gray-900 mt-1",children:(null==e?void 0:e.measurement)||"Loading..."})]}),(0,r.jsxs)("div",{className:"md:col-span-2",children:[(0,r.jsx)("span",{className:"font-medium text-gray-700",children:"Status:"}),(0,r.jsx)("span",{className:"ml-2 px-2 py-1 bg-orange-100 text-orange-800 rounded-full text-sm",children:(null==e?void 0:e.status)||"Loading..."})]})]})})]}),(0,r.jsxs)(n.Zp,{children:[(0,r.jsx)(n.aR,{children:(0,r.jsx)(n.ZB,{className:"text-xl font-semibold",children:"Quotation Details"})}),(0,r.jsx)(n.Wu,{children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium text-gray-700",children:"Status:"}),(0,r.jsx)("span",{className:"ml-2 px-2 py-1 bg-orange-100 text-orange-800 rounded-full text-sm",children:(null==t?void 0:t.status)||"Loading..."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium text-gray-700",children:"Min Qty:"}),(0,r.jsx)("p",{className:"text-gray-900 mt-1",children:(null==t?void 0:t.minQty)||"Loading..."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium text-gray-700",children:"Amount:"}),(0,r.jsxs)("p",{className:"text-gray-900 mt-1",children:["â‚¹",(null==t?void 0:t.amount)||"Loading..."]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium text-gray-700",children:"Measurement:"}),(0,r.jsx)("p",{className:"text-gray-900 mt-1",children:(null==t?void 0:t.measurement)||"Loading..."})]})]})})]}),(0,r.jsxs)(n.Zp,{children:[(0,r.jsx)(n.aR,{children:(0,r.jsx)(n.ZB,{className:"text-xl font-semibold",children:"Submit Your Offer"})}),(0,r.jsx)(n.Wu,{children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Negotiation Type"}),(0,r.jsx)("select",{name:"negotiationType",value:c.negotiationType,onChange:N,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:(0,r.jsx)("option",{value:"Percentage",children:"Percentage"})})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Your Offer Percentage ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)("input",{type:"number",name:"negotiationValue",value:c.negotiationValue,onChange:N,placeholder:"Enter percentage",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,min:"0",max:"100",step:"0.01"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Your Quantity ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)("input",{type:"number",name:"yourQty",value:c.yourQty,onChange:N,placeholder:"Enter quantity",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,min:"1"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Delivery Information ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)("input",{type:"text",name:"deliveryInfo",value:c.deliveryInfo,onChange:N,placeholder:"Enter delivery information",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Additional Notes (Optional)"}),(0,r.jsx)("textarea",{name:"additionalNotes",value:c.additionalNotes,onChange:N,placeholder:"Enter any additional notes...",rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-vertical"})]}),(0,r.jsx)("button",{type:"button",onClick:w,disabled:g,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:g?"Submitting...":"Submit Offer"})]})})]})]})}}},e=>{var a=a=>e(e.s=a);e.O(0,[277,671,441,684,358],()=>a(8690)),_N_E=e.O()}]);
{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Keval/VrajeshRndTechnosoft/sabecho-v2/app/%28public%29/dashboard/profile/page.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useState, useEffect } from 'react'\r\nimport { \r\n  User, \r\n  Mail, \r\n  Phone, \r\n  Building, \r\n  FileText, \r\n  MapPin, \r\n  Calendar,\r\n  Loader2,\r\n  AlertCircle\r\n} from 'lucide-react'\r\nimport Image from 'next/image'\r\n\r\ninterface TokenResponse {\r\n  email: string\r\n  exp: number\r\n  iat: number\r\n  userId: string\r\n  userType: string\r\n}\r\n\r\ninterface ProfileData {\r\n  _id: string\r\n  email: string\r\n  name: string\r\n  companyName: string\r\n  mobileNo: string\r\n  gstNo: string\r\n  userType: string\r\n  pincode: string\r\n  createdAt: string\r\n  shippingDetails: string\r\n  profileImage?: string\r\n}\r\n\r\nconst ProfileComponent: React.FC = () => {\r\n  const [profileData, setProfileData] = useState<ProfileData | null>(null)\r\n  const [loading, setLoading] = useState(true)\r\n  const [error, setError] = useState<string | null>(null)\r\n  const API_URL = process.env.API_URL || \"http://localhost:3033\"\r\n\r\n  useEffect(() => {\r\n    fetchUserProfile()\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [])\r\n\r\n  const getCookie = (name: string): string | null => {\r\n    const value = `; ${document.cookie}`\r\n    const parts = value.split(`; ${name}=`)\r\n    if (parts.length === 2) return parts.pop()?.split(';').shift() || null\r\n    return null\r\n  }\r\n\r\n  const fetchUserProfile = async () => {\r\n    try {\r\n      setLoading(true)\r\n      setError(null)\r\n\r\n      const token = getCookie('token')\r\n      if (!token) {\r\n        throw new Error('No authentication token found')\r\n      }\r\n\r\n      // Verify the token using POST method with token in payload\r\n      const tokenResponse = await fetch(`${API_URL}/api/v1/verifyToken`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({ token })\r\n      })\r\n\r\n      if (!tokenResponse.ok) {\r\n        throw new Error('Token verification failed')\r\n      }\r\n\r\n      const tokenData: TokenResponse = await tokenResponse.json()\r\n\r\n      // Fetch profile data using email\r\n      const profileResponse = await fetch(`${API_URL}/api/v1/profile?email=${tokenData.email}`, {\r\n        method: 'GET',\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json',\r\n        },\r\n      })\r\n\r\n      if (!profileResponse.ok) {\r\n        throw new Error('Failed to fetch profile data')\r\n      }\r\n\r\n      const profileData: ProfileData = await profileResponse.json()\r\n      setProfileData(profileData)\r\n\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'An error occurred')\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  const formatDate = (dateString: string) => {\r\n    return new Date(dateString).toLocaleDateString('en-US', {\r\n      year: 'numeric',\r\n      month: 'long',\r\n      day: 'numeric'\r\n    })\r\n  }\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-64\">\r\n        <div className=\"flex items-center space-x-2 text-blue-600\">\r\n          <Loader2 className=\"animate-spin\" size={24} />\r\n          <span className=\"text-lg\">Loading profile...</span>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-64\">\r\n        <div className=\"flex items-center space-x-2 text-red-600 bg-red-50 p-4 rounded-lg\">\r\n          <AlertCircle size={24} />\r\n          <span className=\"text-lg\">{error}</span>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  if (!profileData) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-64\">\r\n        <div className=\"text-gray-500\">No profile data available</div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"max-w-4xl mx-auto p-6 space-y-6\">\r\n      {/* Header Section */}\r\n      <div className=\"bg-white rounded-lg shadow-sm border p-6\">\r\n        <div className=\"flex flex-col md:flex-row items-start md:items-center space-y-4 md:space-y-0 md:space-x-6\">\r\n          {/* Profile Image */}\r\n          <div className=\"relative\">\r\n            {profileData.profileImage ? (\r\n              <Image\r\n                src={`${API_URL}/api/v1/image/${profileData.profileImage}`}\r\n                alt={profileData.name}\r\n                width={50}\r\n                height={50}\r\n                className=\"w-24 h-24 rounded-full object-cover border-4 border-blue-100\"\r\n              />\r\n            ) : (\r\n              <div className=\"w-24 h-24 rounded-full bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center\">\r\n                <User size={32} className=\"text-white\" />\r\n              </div>\r\n            )}\r\n            <div className=\"absolute -bottom-1 -right-1 w-6 h-6 bg-green-500 rounded-full border-2 border-white\"></div>\r\n          </div>\r\n\r\n          {/* Basic Info */}\r\n          <div className=\"flex-1\">\r\n            <h1 className=\"text-2xl font-bold text-gray-900\">{profileData.name}</h1>\r\n            <p className=\"text-blue-600 font-medium\">{profileData.companyName}</p>\r\n            <div className=\"flex items-center space-x-2 mt-2\">\r\n              <span className=\"px-3 py-1 bg-blue-100 text-blue-800 text-sm font-medium rounded-full capitalize\">\r\n                {profileData.userType}\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Profile Details Grid */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n        {/* Contact Information */}\r\n        <div className=\"bg-white rounded-lg shadow-sm border p-6\">\r\n          <h2 className=\"text-lg font-semibold text-gray-900 mb-4 flex items-center\">\r\n            <Mail className=\"mr-2 text-blue-600\" size={20} />\r\n            Contact Information\r\n          </h2>\r\n          <div className=\"space-y-4\">\r\n            <div className=\"flex items-center space-x-3\">\r\n              <Mail size={16} className=\"text-gray-400\" />\r\n              <div>\r\n                <p className=\"text-sm text-gray-500\">Email</p>\r\n                <p className=\"font-medium text-gray-900\">{profileData.email}</p>\r\n              </div>\r\n            </div>\r\n            <div className=\"flex items-center space-x-3\">\r\n              <Phone size={16} className=\"text-gray-400\" />\r\n              <div>\r\n                <p className=\"text-sm text-gray-500\">Mobile</p>\r\n                <p className=\"font-medium text-gray-900\">{profileData.mobileNo}</p>\r\n              </div>\r\n            </div>\r\n            <div className=\"flex items-center space-x-3\">\r\n              <MapPin size={16} className=\"text-gray-400\" />\r\n              <div>\r\n                <p className=\"text-sm text-gray-500\">Pincode</p>\r\n                <p className=\"font-medium text-gray-900\">{profileData.pincode}</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Business Information */}\r\n        <div className=\"bg-white rounded-lg shadow-sm border p-6\">\r\n          <h2 className=\"text-lg font-semibold text-gray-900 mb-4 flex items-center\">\r\n            <Building className=\"mr-2 text-blue-600\" size={20} />\r\n            Business Information\r\n          </h2>\r\n          <div className=\"space-y-4\">\r\n            <div className=\"flex items-center space-x-3\">\r\n              <Building size={16} className=\"text-gray-400\" />\r\n              <div>\r\n                <p className=\"text-sm text-gray-500\">Company</p>\r\n                <p className=\"font-medium text-gray-900\">{profileData.companyName}</p>\r\n              </div>\r\n            </div>\r\n            <div className=\"flex items-center space-x-3\">\r\n              <FileText size={16} className=\"text-gray-400\" />\r\n              <div>\r\n                <p className=\"text-sm text-gray-500\">GST Number</p>\r\n                <p className=\"font-medium text-gray-900\">{profileData.gstNo}</p>\r\n              </div>\r\n            </div>\r\n            <div className=\"flex items-center space-x-3\">\r\n              <Calendar size={16} className=\"text-gray-400\" />\r\n              <div>\r\n                <p className=\"text-sm text-gray-500\">GST Registration Date</p>\r\n                <p className=\"font-medium text-gray-900\">01/07/2017</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Address Section */}\r\n      <div className=\"bg-white rounded-lg shadow-sm border p-6\">\r\n        <h2 className=\"text-lg font-semibold text-gray-900 mb-4 flex items-center\">\r\n          <MapPin className=\"mr-2 text-blue-600\" size={20} />\r\n          Shipping Address\r\n        </h2>\r\n        <div className=\"bg-gray-50 rounded-lg p-4\">\r\n          <p className=\"text-gray-700 leading-relaxed\">{profileData.shippingDetails}</p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Account Information */}\r\n      <div className=\"bg-white rounded-lg shadow-sm border p-6\">\r\n        <h2 className=\"text-lg font-semibold text-gray-900 mb-4 flex items-center\">\r\n          <User className=\"mr-2 text-blue-600\" size={20} />\r\n          Account Information\r\n        </h2>\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n          <div>\r\n            <p className=\"text-sm text-gray-500\">Account Created</p>\r\n            <p className=\"font-medium text-gray-900\">{formatDate(profileData.createdAt)}</p>\r\n          </div>\r\n          <div>\r\n            <p className=\"text-sm text-gray-500\">User ID</p>\r\n            <p className=\"font-mono text-sm text-gray-600\">{profileData._id}</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ProfileComponent"],"names":[],"mappings":"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","debugId":null}}]
}
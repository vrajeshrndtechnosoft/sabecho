(()=>{var e={};e.id=113,e.ids=[113],e.modules={589:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,6346,23)),Promise.resolve().then(r.t.bind(r,7924,23)),Promise.resolve().then(r.t.bind(r,5656,23)),Promise.resolve().then(r.t.bind(r,99,23)),Promise.resolve().then(r.t.bind(r,8243,23)),Promise.resolve().then(r.t.bind(r,8827,23)),Promise.resolve().then(r.t.bind(r,2763,23)),Promise.resolve().then(r.t.bind(r,7173,23))},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1030:(e,t,r)=>{Promise.resolve().then(r.bind(r,1476))},1476:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var s=r(687),n=r(3210),a=r(5192),o=r(2581),i=r(6189);let d=()=>{let[e,t]=(0,n.useState)(null),[r,d]=(0,n.useState)(null),[l,c]=(0,n.useState)({negotiationType:"Percentage",negotiationValue:"",yourQty:"",deliveryInfo:"",additionalNotes:""}),[u,m]=(0,n.useState)(!0),[x,h]=(0,n.useState)(!1),p=(0,i.useSearchParams)().get("id"),g=(0,i.useRouter)(),f=process.env.API_URL||"http://localhost:3033";(0,n.useEffect)(()=>{v(),y()},[p]);let b=(0,n.useCallback)(e=>{let t=`; ${document.cookie}`.split(`; ${e}=`);return 2===t.length&&t.pop()?.split(";").shift()||null},[]),v=async()=>{try{let e=await fetch(`${f}/api/v1/quotaRequirement/${p}`);if(!e.ok)throw Error("Failed to fetch order data");let t=await e.json();d(t)}catch(e){console.error("Error fetching order data:",e),o.oR.error("Failed to fetch order data. Please try again.")}},y=async()=>{try{let e=await fetch(`${f}/api/v1/requirements/reqId/${p}`);if(!e.ok)throw Error("Failed to fetch product data");let r=await e.json();t(r)}catch(e){console.error("Error fetching product data:",e),o.oR.error("Failed to fetch product data. Please try again.")}finally{m(!1)}},j=e=>{let{name:t,value:r}=e.target;c(e=>({...e,[t]:r}))},N=async()=>{if(!l.negotiationValue||!l.yourQty||!l.deliveryInfo)return void o.oR.error("Please fill in all required fields.");if(!r||!e)return void o.oR.error("Product or order data is not available. Please refresh and try again.");h(!0);let t={data:{negotiationValue:l.negotiationValue,yourQty:l.yourQty,deliveryRelatedInfo:l.deliveryInfo,messages:l.additionalNotes,previewAmount:r.amount,previewQty:r.minQty,measurement:e.measurement,SellerEmail:r.seller_email},productData:e,orderData:r},s=b("token");try{let e=await fetch(`${f}/api/v1/negotiation`,{method:"POST",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok)throw Error("Failed to submit negotiation");let r=await e.json();console.log("Success:",r),g.push("/dashboard/tracking"),o.oR.success("Negotiation submitted successfully!"),c({negotiationType:"Percentage",negotiationValue:"",yourQty:"",deliveryInfo:"",additionalNotes:""})}catch(e){console.error("Error:",e),o.oR.error("Failed to submit negotiation. Please try again.")}finally{h(!1)}};return u?(0,s.jsx)("div",{className:"max-w-4xl mx-auto p-6",children:(0,s.jsxs)("div",{className:"animate-pulse",children:[(0,s.jsx)("div",{className:"h-8 bg-gray-200 rounded mb-6"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"h-32 bg-gray-200 rounded"}),(0,s.jsx)("div",{className:"h-32 bg-gray-200 rounded"}),(0,s.jsx)("div",{className:"h-48 bg-gray-200 rounded"})]})]})}):(0,s.jsxs)("div",{className:"max-w-4xl mx-auto p-6 space-y-6",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Negotiation Form"}),(0,s.jsxs)(a.Zp,{children:[(0,s.jsx)(a.aR,{children:(0,s.jsx)(a.ZB,{className:"text-xl font-semibold",children:"Product Details"})}),(0,s.jsx)(a.Wu,{children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-gray-700",children:"Name:"}),(0,s.jsx)("p",{className:"text-gray-900 mt-1",children:e?.name||"Loading..."})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-gray-700",children:"Min Qty:"}),(0,s.jsx)("p",{className:"text-gray-900 mt-1",children:e?.minQty||"Loading..."})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-gray-700",children:"Specification:"}),(0,s.jsx)("p",{className:"text-gray-900 mt-1",children:e?.specification||"Loading..."})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-gray-700",children:"Measurement:"}),(0,s.jsx)("p",{className:"text-gray-900 mt-1",children:e?.measurement||"Loading..."})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("span",{className:"font-medium text-gray-700",children:"Status:"}),(0,s.jsx)("span",{className:"ml-2 px-2 py-1 bg-orange-100 text-orange-800 rounded-full text-sm",children:e?.status||"Loading..."})]})]})})]}),(0,s.jsxs)(a.Zp,{children:[(0,s.jsx)(a.aR,{children:(0,s.jsx)(a.ZB,{className:"text-xl font-semibold",children:"Quotation Details"})}),(0,s.jsx)(a.Wu,{children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-gray-700",children:"Status:"}),(0,s.jsx)("span",{className:"ml-2 px-2 py-1 bg-orange-100 text-orange-800 rounded-full text-sm",children:r?.status||"Loading..."})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-gray-700",children:"Min Qty:"}),(0,s.jsx)("p",{className:"text-gray-900 mt-1",children:r?.minQty||"Loading..."})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-gray-700",children:"Amount:"}),(0,s.jsxs)("p",{className:"text-gray-900 mt-1",children:["â‚¹",r?.amount||"Loading..."]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-gray-700",children:"Measurement:"}),(0,s.jsx)("p",{className:"text-gray-900 mt-1",children:r?.measurement||"Loading..."})]})]})})]}),(0,s.jsxs)(a.Zp,{children:[(0,s.jsx)(a.aR,{children:(0,s.jsx)(a.ZB,{className:"text-xl font-semibold",children:"Submit Your Offer"})}),(0,s.jsx)(a.Wu,{children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Negotiation Type"}),(0,s.jsx)("select",{name:"negotiationType",value:l.negotiationType,onChange:j,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:(0,s.jsx)("option",{value:"Percentage",children:"Percentage"})})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Your Offer Percentage ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{type:"number",name:"negotiationValue",value:l.negotiationValue,onChange:j,placeholder:"Enter percentage",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,min:"0",max:"100",step:"0.01"})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Your Quantity ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{type:"number",name:"yourQty",value:l.yourQty,onChange:j,placeholder:"Enter quantity",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,min:"1"})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Delivery Information ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{type:"text",name:"deliveryInfo",value:l.deliveryInfo,onChange:j,placeholder:"Enter delivery information",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Additional Notes (Optional)"}),(0,s.jsx)("textarea",{name:"additionalNotes",value:l.additionalNotes,onChange:j,placeholder:"Enter any additional notes...",rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-vertical"})]}),(0,s.jsx)("button",{type:"button",onClick:N,disabled:x,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:x?"Submitting...":"Submit Offer"})]})})]})]})}},2031:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var s=r(7413);function n({children:e}){return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("html",{children:(0,s.jsx)("body",{children:e})})})}r(2704)},2129:()=>{},2704:()=>{},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},4342:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(2907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\Keval\\\\VrajeshRndTechnosoft\\\\sabecho-v2\\\\app\\\\(orders)\\\\negotiation\\\\[id]\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\Keval\\VrajeshRndTechnosoft\\sabecho-v2\\app\\(orders)\\negotiation\\[id]\\page.tsx","default")},5192:(e,t,r)=>{"use strict";r.d(t,{BT:()=>d,Wu:()=>l,ZB:()=>i,Zp:()=>a,aR:()=>o});var s=r(687);r(3210);var n=r(6241);function a({className:e,...t}){return(0,s.jsx)("div",{"data-slot":"card",className:(0,n.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...t})}function o({className:e,...t}){return(0,s.jsx)("div",{"data-slot":"card-header",className:(0,n.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...t})}function i({className:e,...t}){return(0,s.jsx)("div",{"data-slot":"card-title",className:(0,n.cn)("leading-none font-semibold",e),...t})}function d({className:e,...t}){return(0,s.jsx)("div",{"data-slot":"card-description",className:(0,n.cn)("text-muted-foreground text-sm",e),...t})}function l({className:e,...t}){return(0,s.jsx)("div",{"data-slot":"card-content",className:(0,n.cn)("px-6",e),...t})}},5325:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,6444,23)),Promise.resolve().then(r.t.bind(r,6042,23)),Promise.resolve().then(r.t.bind(r,8170,23)),Promise.resolve().then(r.t.bind(r,9477,23)),Promise.resolve().then(r.t.bind(r,9345,23)),Promise.resolve().then(r.t.bind(r,2089,23)),Promise.resolve().then(r.t.bind(r,6577,23)),Promise.resolve().then(r.t.bind(r,1307,23))},5681:()=>{},5819:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>l});var s=r(5239),n=r(8088),a=r(8170),o=r.n(a),i=r(893),d={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);r.d(t,d);let l={children:["",{children:["(orders)",{children:["negotiation",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,4342)),"C:\\Users\\Keval\\VrajeshRndTechnosoft\\sabecho-v2\\app\\(orders)\\negotiation\\[id]\\page.tsx"]}]},{}]},{loading:[()=>Promise.resolve().then(r.bind(r,8323)),"C:\\Users\\Keval\\VrajeshRndTechnosoft\\sabecho-v2\\app\\(orders)\\negotiation\\loading.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,2031)),"C:\\Users\\Keval\\VrajeshRndTechnosoft\\sabecho-v2\\app\\(orders)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,7398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,9999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,5284,23)),"next/dist/client/components/unauthorized-error"]}]},{"not-found":[()=>Promise.resolve().then(r.t.bind(r,7398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,9999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,5284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,c=["C:\\Users\\Keval\\VrajeshRndTechnosoft\\sabecho-v2\\app\\(orders)\\negotiation\\[id]\\page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:n.RouteKind.APP_PAGE,page:"/(orders)/negotiation/[id]/page",pathname:"/negotiation/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},6241:(e,t,r)=>{"use strict";r.d(t,{cn:()=>a});var s=r(9384),n=r(2348);function a(...e){return(0,n.QP)((0,s.$)(e))}},6487:()=>{},7982:(e,t,r)=>{Promise.resolve().then(r.bind(r,4342))},8323:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var s=r(7413);r(1120);let n=()=>(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})})})},8335:()=>{},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[825,985,581],()=>r(5819));module.exports=s})();
{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 68, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Keval/VrajeshRndTechnosoft/sabecho-v2/lib/db.ts"],"sourcesContent":["import mongoose, { ConnectOptions } from \"mongoose\";\r\n\r\nconst options: ConnectOptions = {\r\n  serverSelectionTimeoutMS: 5000,\r\n  connectTimeoutMS: 10000,\r\n  socketTimeoutMS: 45000,\r\n  retryWrites: true,\r\n};\r\n\r\n// Keep track of the connection status\r\nlet isConnected = false;\r\n\r\nconst connectDb = async (): Promise<void> => {\r\n  if (isConnected) {\r\n    // Already connected\r\n    return;\r\n  }\r\n\r\n  try {\r\n    await mongoose.connect(process.env.MONGODB_URI as string, options);\r\n    isConnected = true;\r\n    console.log(\"Connected to MongoDB\");\r\n  } catch (err) {\r\n    console.log(`DB connection error - ${err}`);\r\n    throw err;\r\n  }\r\n};\r\n\r\nconst closeDbConnection = async (): Promise<void> => {\r\n  try {\r\n    await mongoose.connection.close();\r\n    isConnected = false;\r\n    console.log(\"MongoDB connection closed\");\r\n  } catch (err) {\r\n    console.error(err);\r\n  }\r\n};\r\n\r\nexport { connectDb, closeDbConnection };\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,UAA0B;IAC9B,0BAA0B;IAC1B,kBAAkB;IAClB,iBAAiB;IACjB,aAAa;AACf;AAEA,sCAAsC;AACtC,IAAI,cAAc;AAElB,MAAM,YAAY;IAChB,IAAI,aAAa;QACf,oBAAoB;QACpB;IACF;IAEA,IAAI;QACF,MAAM,yGAAA,CAAA,UAAQ,CAAC,OAAO,CAAC,QAAQ,GAAG,CAAC,WAAW,EAAY;QAC1D,cAAc;QACd,QAAQ,GAAG,CAAC;IACd,EAAE,OAAO,KAAK;QACZ,QAAQ,GAAG,CAAC,CAAC,sBAAsB,EAAE,KAAK;QAC1C,MAAM;IACR;AACF;AAEA,MAAM,oBAAoB;IACxB,IAAI;QACF,MAAM,yGAAA,CAAA,UAAQ,CAAC,UAAU,CAAC,KAAK;QAC/B,cAAc;QACd,QAAQ,GAAG,CAAC;IACd,EAAE,OAAO,KAAK;QACZ,QAAQ,KAAK,CAAC;IAChB;AACF","debugId":null}},
    {"offset": {"line": 112, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Keval/VrajeshRndTechnosoft/sabecho-v2/models/home/AboutUs.ts"],"sourcesContent":["import mongoose, { Document, Schema } from 'mongoose';\r\n\r\n// TypeScript interfaces\r\ninterface ImageItem {\r\n  image: {\r\n    url: string;\r\n    altText: string;\r\n  };\r\n  title: string;\r\n  description: string;\r\n}\r\n\r\ninterface AboutUs {\r\n  title: string;\r\n  description: string;\r\n  listOfImages: ImageItem[];\r\n  createdAt: Date;\r\n  updatedAt: Date;\r\n}\r\n\r\ninterface AboutUsDocument extends Document, AboutUs {}\r\n\r\nconst imageItemSchema = new Schema<ImageItem>({\r\n  image: {\r\n    url: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n    altText: {\r\n      type: String,\r\n      required: true,\r\n      maxlength: 100,\r\n    },\r\n  },\r\n  title: {\r\n    type: String,\r\n    required: true,\r\n    trim: true,\r\n    maxlength: 100,\r\n  },\r\n  description: {\r\n    type: String,\r\n    required: true,\r\n    trim: true,\r\n    maxlength: 500,\r\n  },\r\n});\r\n\r\nconst aboutUsSchema = new Schema<AboutUsDocument>(\r\n  {\r\n    title: {\r\n      type: String,\r\n      required: true,\r\n      trim: true,\r\n      maxlength: 100,\r\n    },\r\n    description: {\r\n      type: String,\r\n      required: true,\r\n      trim: true,\r\n      maxlength: 1000,\r\n    },\r\n    listOfImages: [imageItemSchema],\r\n  },\r\n  { timestamps: true },\r\n);\r\n\r\nconst AboutUs = mongoose.models.AboutUs || mongoose.model<AboutUsDocument>('AboutUs', aboutUsSchema);\r\n\r\nexport default AboutUs;"],"names":[],"mappings":";;;AAAA;;AAsBA,MAAM,kBAAkB,IAAI,yGAAA,CAAA,SAAM,CAAY;IAC5C,OAAO;QACL,KAAK;YACH,MAAM;YACN,UAAU;QACZ;QACA,SAAS;YACP,MAAM;YACN,UAAU;YACV,WAAW;QACb;IACF;IACA,OAAO;QACL,MAAM;QACN,UAAU;QACV,MAAM;QACN,WAAW;IACb;IACA,aAAa;QACX,MAAM;QACN,UAAU;QACV,MAAM;QACN,WAAW;IACb;AACF;AAEA,MAAM,gBAAgB,IAAI,yGAAA,CAAA,SAAM,CAC9B;IACE,OAAO;QACL,MAAM;QACN,UAAU;QACV,MAAM;QACN,WAAW;IACb;IACA,aAAa;QACX,MAAM;QACN,UAAU;QACV,MAAM;QACN,WAAW;IACb;IACA,cAAc;QAAC;KAAgB;AACjC,GACA;IAAE,YAAY;AAAK;AAGrB,MAAM,UAAU,yGAAA,CAAA,UAAQ,CAAC,MAAM,CAAC,OAAO,IAAI,yGAAA,CAAA,UAAQ,CAAC,KAAK,CAAkB,WAAW;uCAEvE","debugId":null}},
    {"offset": {"line": 185, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Keval/VrajeshRndTechnosoft/sabecho-v2/app/api/v1/about-us/route.ts"],"sourcesContent":["// File: app/api/about-us/route.ts (GET all, POST create)\r\n\r\nimport { NextRequest, NextResponse } from \"next/server\";\r\nimport {connectDb} from \"@/lib/db\";\r\nimport AboutUs from \"@/models/home/AboutUs\";\r\nimport fs from 'fs/promises';\r\nimport path from 'path';\r\n\r\nexport async function GET() {\r\n  try {\r\n    await connectDb();\r\n    const aboutUs = await AboutUs.find();\r\n    return NextResponse.json(aboutUs);\r\n  } catch (error) {\r\n    return NextResponse.json({ message: (error as Error).message }, { status: 500 });\r\n  }\r\n}\r\n\r\nexport async function POST(req: NextRequest) {\r\n  try {\r\n    await connectDb();\r\n    const formData = await req.formData();\r\n\r\n    const title = formData.get(\"title\") as string;\r\n    const description = formData.get(\"description\") as string;\r\n    const listOfImages = JSON.parse(formData.get(\"listOfImages\") as string);\r\n    const files: File[] = formData.getAll(\"images\") as File[];\r\n\r\n    if (!title || !description || !Array.isArray(listOfImages) || listOfImages.length !== files.length) {\r\n      return NextResponse.json({ message: \"Invalid input\" }, { status: 400 });\r\n    }\r\n\r\n    const imageItems = await Promise.all(\r\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n      listOfImages.map(async (item: any, index: number) => {\r\n        const file = files[index];\r\n        const filename = `${Date.now()}-${file.name}`;\r\n        const buffer = Buffer.from(await file.arrayBuffer());\r\n        await fs.writeFile(`public/uploads/${filename}`, buffer);\r\n\r\n        return {\r\n          image: { url: filename, altText: item.image.altText },\r\n          title: item.title,\r\n          description: item.description,\r\n        };\r\n      })\r\n    );\r\n\r\n    const aboutUs = new AboutUs({ title, description, listOfImages: imageItems });\r\n    await aboutUs.save();\r\n    return NextResponse.json(aboutUs, { status: 201 });\r\n  } catch (error) {\r\n    return NextResponse.json({ message: (error as Error).message }, { status: 500 });\r\n  }\r\n}\r\n\r\n\r\n\r\nexport async function deleteFile(filename: string) {\r\n  try {\r\n    await fs.unlink(path.join('public/uploads', filename));\r\n  } catch (error) {\r\n    console.error('Error deleting file:', error);\r\n  }\r\n}"],"names":[],"mappings":"AAAA,yDAAyD;;;;;;AAEzD;AACA;AACA;AACA;AACA;;;;;;AAEO,eAAe;IACpB,IAAI;QACF,MAAM,CAAA,GAAA,2GAAA,CAAA,YAAS,AAAD;QACd,MAAM,UAAU,MAAM,2HAAA,CAAA,UAAO,CAAC,IAAI;QAClC,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;IAC3B,EAAE,OAAO,OAAO;QACd,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YAAE,SAAS,AAAC,MAAgB,OAAO;QAAC,GAAG;YAAE,QAAQ;QAAI;IAChF;AACF;AAEO,eAAe,KAAK,GAAgB;IACzC,IAAI;QACF,MAAM,CAAA,GAAA,2GAAA,CAAA,YAAS,AAAD;QACd,MAAM,WAAW,MAAM,IAAI,QAAQ;QAEnC,MAAM,QAAQ,SAAS,GAAG,CAAC;QAC3B,MAAM,cAAc,SAAS,GAAG,CAAC;QACjC,MAAM,eAAe,KAAK,KAAK,CAAC,SAAS,GAAG,CAAC;QAC7C,MAAM,QAAgB,SAAS,MAAM,CAAC;QAEtC,IAAI,CAAC,SAAS,CAAC,eAAe,CAAC,MAAM,OAAO,CAAC,iBAAiB,aAAa,MAAM,KAAK,MAAM,MAAM,EAAE;YAClG,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;gBAAE,SAAS;YAAgB,GAAG;gBAAE,QAAQ;YAAI;QACvE;QAEA,MAAM,aAAa,MAAM,QAAQ,GAAG,CAClC,8DAA8D;QAC9D,aAAa,GAAG,CAAC,OAAO,MAAW;YACjC,MAAM,OAAO,KAAK,CAAC,MAAM;YACzB,MAAM,WAAW,GAAG,KAAK,GAAG,GAAG,CAAC,EAAE,KAAK,IAAI,EAAE;YAC7C,MAAM,SAAS,OAAO,IAAI,CAAC,MAAM,KAAK,WAAW;YACjD,MAAM,qHAAA,CAAA,UAAE,CAAC,SAAS,CAAC,CAAC,eAAe,EAAE,UAAU,EAAE;YAEjD,OAAO;gBACL,OAAO;oBAAE,KAAK;oBAAU,SAAS,KAAK,KAAK,CAAC,OAAO;gBAAC;gBACpD,OAAO,KAAK,KAAK;gBACjB,aAAa,KAAK,WAAW;YAC/B;QACF;QAGF,MAAM,UAAU,IAAI,2HAAA,CAAA,UAAO,CAAC;YAAE;YAAO;YAAa,cAAc;QAAW;QAC3E,MAAM,QAAQ,IAAI;QAClB,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC,SAAS;YAAE,QAAQ;QAAI;IAClD,EAAE,OAAO,OAAO;QACd,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YAAE,SAAS,AAAC,MAAgB,OAAO;QAAC,GAAG;YAAE,QAAQ;QAAI;IAChF;AACF;AAIO,eAAe,WAAW,QAAgB;IAC/C,IAAI;QACF,MAAM,qHAAA,CAAA,UAAE,CAAC,MAAM,CAAC,iGAAA,CAAA,UAAI,CAAC,IAAI,CAAC,kBAAkB;IAC9C,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,wBAAwB;IACxC;AACF","debugId":null}}]
}